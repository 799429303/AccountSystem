<html>
<head>
    <title>账号密码网站列表</title>
</head>
<body>
    <table class="table">
    </table>
    <input type="button" name="btnAdd" class="btn" value="添加" />

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">添加</h4>
                </div>
                <div class="modal-body">
                    <p></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
</body>



</html>

<script type="text/javascript" src="~/Scripts/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript">
    $(init());

    function init() {
        $.post("/PwList/GetList", "",
            function (msg) {
                msg = eval("(" + msg + ")");
                var strHtml = "<tr><th>网站</th><th>用户名</th><th>密码</th></tr>";
                $(msg).each(
                    function (index, item) {
                        strHtml += "<tr><td>";
                        strHtml += item.website;
                        strHtml += "</td><td>";
                        strHtml += item.username;
                        strHtml += "</td><td>";
                        strHtml += item.password;
                        strHtml += "</td>";
                    }
                );
                $(".table").append(strHtml);
            }
               );
    }

    function clear()
    {
       $(".table").children().detach();
    }

    $("input[name='btnAdd']").click(
            function () {
                $.get("AddUserWeb/index", "", function (data) {
                    $('#myModal .modal-body').html(data);
                }
                );
                $('#myModal').modal({ show: true, backdrop: false })
            });
    //location.href = "AddUserWeb/index";
    //$("#myModal").on("hidden.bs.modal", function () {
    //    clear();
    //    init();
    //}
    //)
    $("#myModal .close").click(
        function () {
            clear();
            init();
        }
        );
    $("#myModal .btn").click(
         function () {
             clear();
             init();
         }
        );
</script>
